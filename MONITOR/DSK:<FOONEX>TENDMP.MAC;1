;<FOONEX>TENDMP.JCP;2    23-Jul-80 14:43:49    EDIT BY PETERS
; Fix LSH to "+" instead of "-"
;<FOONEX>TENDMP.JCP;1     3-Jul-80 18:12:32    EDIT BY PETERS
;<134-TENEX>TENDMP.F3A;3    20-Jun-79 14:55:16    EDIT BY PETERS
;<134-TENEX>TENDMP.F3A;2    18-Jun-79 15:01:42    EDIT BY PETERS
;<134-TENEX>TENDMP.F3A;1    11-Jun-79 21:18:26    EDIT BY PETERS

;TENDMP MODULE FOR JCP

TITLE TENDMP

OPDEF MTRD[732000,,0]		;READ ONE RECORD

TENDMP::0			;CALLED HERE WITH JSR FROM GETSWM
	MOVEI 2,400		;POINT TO BEGINNING OF SWAPABLE MONITOR
READLP:	HRRZ 1,3000(2)		;GET MMAP ENTRY FOR THIS PAGE
	LSH 1,^D9		;MAKE PAGE NUMBER INTO MA FIRST
	MTRD 1,1000		;READ ONE PAGE, COLLECT STATUS TO AC 1
	ADDI 2,1		;INCREMENT PAGE NUMBER
	JUMPG 1,READLP		;LOOP IF MORE RECORDS TO READ
	JRST @TENDMP		;AND RETURN TO GETSWM

END

